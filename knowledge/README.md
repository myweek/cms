# 新闻管理系统

## 项目说明
基于 Laravel 框架开发的新闻管理系统，支持多主题切换、文章管理、分类管理、标签管理等功能。

## 目录结构
```
cms/
├── app/                    # 应用核心代码
│   ├── Http/              # HTTP 相关
│   │   ├── Controllers/   # 控制器
│   │   ├── Middleware/    # 中间件
│   │   └── Requests/      # 表单请求
│   ├── Models/            # 数据模型
│   └── Services/          # 业务逻辑
├── config/                # 配置文件
├── database/              # 数据库相关
│   ├── migrations/        # 数据库迁移
│   └── seeders/          # 数据填充
├── public/                # 公共资源
├── resources/             # 资源文件
│   ├── views/            # 视图文件
│   └── themes/           # 主题文件
├── routes/                # 路由定义
└── tests/                 # 测试文件
```

## 功能模块

### 1. 新闻内容管理
- **新闻撰写与发布**
  - 支持文本、图片、视频等多格式内容编辑
  - 提供富文本编辑器
  - 支持草稿保存和继续编辑
- **分类与标签**
  - 按政治、科技、娱乐等分类管理
  - 支持自定义标签（如"热点""独家"）
- **审核与多级审批**
  - 编辑初审后提交管理员终审
  - 记录审核日志
- **版本控制**
  - 保存新闻历史版本
  - 支持回溯和对比

### 2. 用户与权限管理
- **角色划分**
  - 管理员：管理用户权限、新闻分类、系统配置
  - 编辑/记者：撰写新闻、提交审核、管理个人稿件
  - 普通用户：浏览新闻、评论、点赞、分享
- **权限控制**
  - 基于角色的访问控制（RBAC）
  - 编辑仅可修改自己发布的新闻

### 3. 发布与推送
- **定时发布**
  - 预设发布时间
  - 确保新闻时效性
- **多渠道分发**
  - 支持官网、APP、社交媒体同步发布
- **个性化推送**
  - 根据用户浏览历史和标签订阅推送新闻

### 4. 互动与评论
- **评论管理**
  - 用户可发表评论
  - 支持审核、删除、举报功能
- **社交功能**
  - 点赞与分享
  - 集成社交平台分享按钮
- **用户反馈**
  - 收集内容错误或改进建议

### 5. 数据统计与分析
- **访问量统计**
  - 记录新闻点击量、浏览时长、分享次数
- **用户行为分析**
  - 分析用户阅读偏好
  - 优化推荐算法
- **内容效果评估**
  - 通过评论数、转发量评估新闻传播效果

### 6. 搜索与推荐
- **全文检索**
  - 支持标题、内容、标签多维搜索
- **智能推荐**
  - 基于协同过滤或内容相似度推荐相关新闻

## 非功能性需求

### 1. 性能要求
- 页面响应时间：常规页面 < 1秒，复杂页面 < 3秒
- 支持高并发访问
- 数据库需优化索引和分表策略

### 2. 安全性
- 数据加密存储（如用户密码哈希处理）
- 防止 SQL 注入、XSS 攻击
- 设置访问频率限制

### 3. 可用性
- 响应式设计，适配 PC、手机、平板
- 提供操作指引和错误提示
- 降低学习成本

### 4. 可扩展性
- 模块化设计，便于新增功能
- 支持分布式部署
- 未来可扩展至微服务架构

## 技术栈
- **后端**：Laravel 10.x
- **前端**：Vue.js + Element UI
- **数据库**：MySQL
- **缓存**：Redis
- **队列**：Laravel Queue

## 开发规范

### 1. 代码规范
- 遵循 PSR-12 编码规范
- 使用 PHP 8.1+ 特性
- 严格类型声明
- 完整的注释文档

### 2. 命名规范
- **类名**：大驼峰命名（PascalCase）
- **方法名**：小驼峰命名（camelCase）
- **变量名**：小驼峰命名（camelCase）
- **常量名**：全大写下划线分隔（UPPER_SNAKE_CASE）
- **数据库表名**：小写下划线分隔（snake_case）

### 3. 目录规范
- **控制器**：app/Http/Controllers
- **模型**：app/Models
- **服务**：app/Services
- **中间件**：app/Http/Middleware
- **请求验证**：app/Http/Requests
- **视图**：resources/views
- **主题**：resources/themes

### 4. 文档规范
- **类注释**：包含类描述、作者、日期
- **方法注释**：包含方法描述、参数说明、返回值说明
- **属性注释**：包含属性描述、类型说明
- **代码注释**：关键代码逻辑说明

### 5. 安全规范
- 使用 CSRF 防护
- 输入数据验证
- XSS 防护
- SQL 注入防护
- 文件上传安全
- 密码加密存储

### 6. 测试规范
- 单元测试覆盖
- 功能测试覆盖
- 测试用例完整
- 测试数据独立

## 安装部署

### 1. 环境要求
- PHP >= 8.1
- MySQL >= 5.7
- Redis >= 6.0
- Composer
- Node.js >= 16.0

### 2. 安装步骤
```bash
# 克隆项目
git clone [项目地址]

# 安装依赖
composer install
npm install

# 环境配置
cp .env.example .env
php artisan key:generate

# 数据库迁移
php artisan migrate
php artisan db:seed

# 编译资源
npm run dev

# 启动服务
php artisan serve
```

### 3. 目录权限
```bash
chmod -R 755 storage bootstrap/cache
chown -R www-data:www-data storage bootstrap/cache
```

## 主题开发

### 1. 主题目录结构
```
theme-name/
├── assets/           # 静态资源
├── layouts/         # 布局模板
├── components/      # 组件模板
├── views/          # 页面模板
├── config.json     # 主题配置文件
└── README.md       # 主题说明文档
```

### 2. 主题配置
```json
{
  "name": "主题名称",
  "version": "1.0.0",
  "description": "主题描述",
  "author": "作者名称",
  "website": "作者网站",
  "styles": {
    "primary": "#4F46E5",
    "secondary": "#6B7280"
  },
  "features": {
    "dark_mode": true,
    "responsive": true
  }
}
```

### 3. 主题开发规范
- 遵循 BEM 命名规范
- 使用 Tailwind CSS 工具类
- 组件化开发
- 响应式设计
- 主题配置统一
- 资源文件优化

## 更新日志

### v1.0.0 (2024-03-xx)
- 初始版本发布
- 基础功能实现
- 默认主题支持 